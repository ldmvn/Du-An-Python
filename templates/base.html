{% load static %}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Phone Store{% endblock %}</title>

   {% block css %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="{% static 'css/style.css' %}">

{% endblock %}

</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container">

    <a class="navbar-brand" href="/">ğŸ“± Phone Store</a>

    <!-- SEARCH FORM -->
    <form class="d-flex ms-3" method="get" action="/">
        <input class="form-control me-2" type="search" name="q"
               placeholder="TÃ¬m sáº£n pháº©m..." value="{{ request.GET.q }}">
        <button class="btn btn-outline-light" type="submit">ğŸ”</button>
    </form>

    <ul class="navbar-nav ms-auto">

        <li class="nav-item">
          <a class="nav-link" href="/">Trang chá»§</a>
        </li>

        <!-- CART -->
        {% with cart=request.session.cart %}
        <li class="nav-item">
          <a class="nav-link position-relative" href="/cart/">
            ğŸ›’ Giá» hÃ ng
            {% if cart %}
              <span class="badge bg-danger position-absolute top-0 start-100 translate-middle">
                {{ cart|length }}
              </span>
            {% endif %}
          </a>
        </li>
        {% endwith %}

        {% if user.is_authenticated %}

            {% if user.is_staff %}
            <li class="nav-item">
              <a class="nav-link" href="/dashboard/">Dashboard</a>
            </li>
            {% endif %}

            <li class="nav-item">
              <a class="nav-link text-warning" href="/logout/">ÄÄƒng xuáº¥t</a>
            </li>

        {% else %}

            <li class="nav-item">
              <a class="nav-link" href="/login/">ÄÄƒng nháº­p</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/register/">ÄÄƒng kÃ½</a>
            </li>

        {% endif %}

    </ul>
  </div>
</nav>

<!-- ===== MESSAGE ===== -->
{% if messages %}
<div class="container mt-3" style="max-width:400px;">
    {% for message in messages %}
        <div class="alert alert-{{ message.tags }} text-center show" role="alert">
            {{ message }}
        </div>
    {% endfor %}
</div>
{% endif %}
<!-- =================== -->

<div class="container mt-4">
    {% block content %}{% endblock %}
</div>

{% block js %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}

<script>
  setTimeout(() => {
    document.querySelectorAll('.alert').forEach(alert => {
      alert.classList.add('fade');
      alert.classList.remove('show');
    });
  }, 3000);
</script>

</body>
</html>
